# ERC721

Cross-chain ERC721 contracts.

### How it works

The system provides a simple and convenient way to track cross-chain NFT transfers by creating a trail of receipts for each cross-chain transfer. This trail of receipts allows off-chain systems to instantly verify the legitimacy of the NFT on all supported chains. Additionally, it allows on-chain system to verify the NFT's legitimacy after the receipt trail has been propagated to the destination chain(s).

Initial design inspiration comes from Vitalik's "Cross-rollup NFT wrapper and migration ideas" [ETH Research post](https://ethresear.ch/t/cross-rollup-nft-wrapper-and-migration-ideas/10507).

Some key concepts:

* NFTs can be sent to/from any supported chain
* Off-chain systems can instantly verify the legitimacy of these NFTs after they are sent to a new chain
* On-chain systems can verify the legitimacy slowly after the receipt trail has been propagated to the destination chain(s)
* Anyone can mint an NFT for any token index (not token ID) on any chain at any time, but the NFT can only be in a confirmed state on one chain
* NFT token IDs are generated by encoding various data. The first 20 bytes are the minter's address and the last 12 bytes is the token index
* Modules with case-specific logic can be built on top of the core bridge
* A token ID may exist simultaneously on multiple chains, but it can only be confirmed on one chain at any given time

## Getting Started

You can create an NFT by minting it:

```solidity
mint(address to, uint256 tokenId);
```

You can send an NFT to any supported chain:

```solidity
send(uint256 toChainId, address to, uint256 tokenId);
```

You can mint and send an NFT in a single transaction:

```solidity
mintAndSend(uint256 toChainId, address to, uint256 tokenId);
```


## Definitions

* Token ID: A unique identifier for NFTs in a given collection. The token ID is generated by encoding the minter's address (20 bytes) and the token index (12 bytes). Token IDs are passed from chain to chain and they have a `confirm`ed flag that can be set on-chain to represent the legitimate NFT. **An address can only mint a token ID whose first 20 bytes matches the minter's address.**
* Token index: An index that represents a specific item in a collection. For example, a collection of 100 items would limit the token indexes of their collection from 0-99. The token index is the last 12 bytes of a token ID. **Any address can mint any token index.**

## Usage

### Compile Contracts
```shell
npm run compile
```

### Test
```shell
npm run test
```
